<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>navit: plugin/j1850/j1850.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">navit
   &#160;<span id="projectnumber">0.5.3-trunk</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('j1850_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">j1850.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;glib.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;termios.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;sys/ioctl.h&gt;</code><br />
<code>#include &quot;config.h&quot;</code><br />
<code>#include &lt;<a class="el" href="item_8h_source.html">navit/item.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="xmlconfig_8h_source.html">navit/xmlconfig.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="main_8h_source.html">navit/main.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">navit/debug.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="map_8h_source.html">navit/map.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="navit_8h_source.html">navit/navit.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="callback_8h_source.html">navit/callback.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="file_8h_source.html">navit/file.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="plugin_8h_source.html">navit/plugin.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="event_8h_source.html">navit/event.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="command_8h_source.html">navit/command.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="config___8h_source.html">navit/config_.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="graphics_8h_source.html">graphics.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="color_8h_source.html">color.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="osd_8h_source.html">osd.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structj1850.html">j1850</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88dd7d1933a98397b5b9977a27908b55"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="j1850_8c.html#a88dd7d1933a98397b5b9977a27908b55">rand_str</a> (char *dest, size_t <a class="el" href="garmin__img_8c.html#a9f59b34b1f25fe00023291b678246bcc">length</a>)</td></tr>
<tr class="memdesc:a88dd7d1933a98397b5b9977a27908b55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a fake sentence. Used for debugging.  <a href="j1850_8c.html#a88dd7d1933a98397b5b9977a27908b55">More...</a><br /></td></tr>
<tr class="separator:a88dd7d1933a98397b5b9977a27908b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a939cdd1c9f91432e7ae9a7744498c86c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="j1850_8c.html#a939cdd1c9f91432e7ae9a7744498c86c">write_to_serial_port</a> (unsigned char *cmd, int device)</td></tr>
<tr class="memdesc:a939cdd1c9f91432e7ae9a7744498c86c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes 'cmd' to the serial port'.  <a href="j1850_8c.html#a939cdd1c9f91432e7ae9a7744498c86c">More...</a><br /></td></tr>
<tr class="separator:a939cdd1c9f91432e7ae9a7744498c86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a7c317cd1d832c8acebc47612e95f92"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="j1850_8c.html#a8a7c317cd1d832c8acebc47612e95f92">j1850_idle</a> (struct <a class="el" href="structj1850.html">j1850</a> *<a class="el" href="structj1850.html">j1850</a>)</td></tr>
<tr class="memdesc:a8a7c317cd1d832c8acebc47612e95f92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called when navit is idle. Does the continous reading.  <a href="j1850_8c.html#a8a7c317cd1d832c8acebc47612e95f92">More...</a><br /></td></tr>
<tr class="separator:a8a7c317cd1d832c8acebc47612e95f92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7573663581a3c8705b05d27749bdb8ad"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="j1850_8c.html#a7573663581a3c8705b05d27749bdb8ad">osd_j1850_draw</a> (struct <a class="el" href="structj1850.html">j1850</a> *this, struct <a class="el" href="structnavit.html">navit</a> *nav, struct <a class="el" href="structvehicle.html">vehicle</a> *v)</td></tr>
<tr class="memdesc:a7573663581a3c8705b05d27749bdb8ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Draws the <a class="el" href="structj1850.html">j1850</a> OSD.  <a href="j1850_8c.html#a7573663581a3c8705b05d27749bdb8ad">More...</a><br /></td></tr>
<tr class="separator:a7573663581a3c8705b05d27749bdb8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1ef6324654f6f1304d80352e3f45883"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="j1850_8c.html#ad1ef6324654f6f1304d80352e3f45883">osd_j1850_init</a> (struct <a class="el" href="structj1850.html">j1850</a> *this, struct <a class="el" href="structnavit.html">navit</a> *nav)</td></tr>
<tr class="memdesc:ad1ef6324654f6f1304d80352e3f45883"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the <a class="el" href="structj1850.html">j1850</a> OSD.  <a href="j1850_8c.html#ad1ef6324654f6f1304d80352e3f45883">More...</a><br /></td></tr>
<tr class="separator:ad1ef6324654f6f1304d80352e3f45883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d6a7d7e0d07e2ba603bd3abd98b264f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="j1850_8c.html#a1d6a7d7e0d07e2ba603bd3abd98b264f">send_and_read</a> (unsigned char *cmd, int USB)</td></tr>
<tr class="memdesc:a1d6a7d7e0d07e2ba603bd3abd98b264f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends 'cmd' and reads the reply from the device.  <a href="j1850_8c.html#a1d6a7d7e0d07e2ba603bd3abd98b264f">More...</a><br /></td></tr>
<tr class="separator:a1d6a7d7e0d07e2ba603bd3abd98b264f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7bc0ad9e76f0dda863f97e6c9464296"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="j1850_8c.html#aa7bc0ad9e76f0dda863f97e6c9464296">j1850_init_serial_port</a> (struct <a class="el" href="structj1850.html">j1850</a> *<a class="el" href="structj1850.html">j1850</a>)</td></tr>
<tr class="memdesc:aa7bc0ad9e76f0dda863f97e6c9464296"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the serial port and saves state to the <a class="el" href="structj1850.html">j1850</a> object.  <a href="j1850_8c.html#aa7bc0ad9e76f0dda863f97e6c9464296">More...</a><br /></td></tr>
<tr class="separator:aa7bc0ad9e76f0dda863f97e6c9464296"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac512538cc3238daa506bcd0f97ac02c1"><td class="memItemLeft" align="right" valign="top">static struct osd_priv *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="j1850_8c.html#ac512538cc3238daa506bcd0f97ac02c1">osd_j1850_new</a> (struct <a class="el" href="structnavit.html">navit</a> *nav, struct <a class="el" href="structosd__methods.html">osd_methods</a> *meth, struct <a class="el" href="structattr.html">attr</a> **attrs)</td></tr>
<tr class="memdesc:ac512538cc3238daa506bcd0f97ac02c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the <a class="el" href="structj1850.html">j1850</a> OSD and set some default properties.  <a href="j1850_8c.html#ac512538cc3238daa506bcd0f97ac02c1">More...</a><br /></td></tr>
<tr class="separator:ac512538cc3238daa506bcd0f97ac02c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eaae939034896b436dffbf5e93c0da1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="j1850_8c.html#a1eaae939034896b436dffbf5e93c0da1">plugin_init</a> (void)</td></tr>
<tr class="memdesc:a1eaae939034896b436dffbf5e93c0da1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The plugin entry point.  <a href="j1850_8c.html#a1eaae939034896b436dffbf5e93c0da1">More...</a><br /></td></tr>
<tr class="separator:a1eaae939034896b436dffbf5e93c0da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8a7c317cd1d832c8acebc47612e95f92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a7c317cd1d832c8acebc47612e95f92">&#9670;&nbsp;</a></span>j1850_idle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void j1850_idle </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structj1850.html">j1850</a> *&#160;</td>
          <td class="paramname"><em>j1850</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function called when navit is idle. Does the continous reading. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname"><a class="el" href="structj1850.html">j1850</a></td><td>- the <a class="el" href="structj1850.html">j1850</a> struct containing the state of the plugin</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>This is the main function of this plugin. It is called when navit is idle, and performs the initialization of the obd device if needed, then reads one char each time it is called, and puts this char in a buffer. When it reads an EOL character, the buffer is parsed, and the appropriate action is taken. The buffer is then cleared and we start over. </p>

<p class="reference">References <a class="el" href="structj1850.html#a1c280b389a318ce0c544969d046ae487">j1850::callback</a>, <a class="el" href="command_8c.html#a6f4393a77b5faecd3074563d45d2dce6">command_evaluate()</a>, <a class="el" href="garmin__img_8c.html#a433b1c9921d3b90f7c145c781a43f325">data</a>, <a class="el" href="debug_8h.html#aba3c0ccefe6daa8941b173073268729e">dbg</a>, <a class="el" href="structj1850.html#a46cf3a1eee02a95f0d17108125e1baf8">j1850::device</a>, <a class="el" href="structj1850.html#ab157e52106af604435bf79eb1c8cd666">j1850::engine_rpm</a>, <a class="el" href="event_8c.html#ae85ae57bf22615a22a497090995be9a5">event_add_idle()</a>, <a class="el" href="event_8c.html#a617f1c54db196a3258a14be7311bec8a">event_remove_timeout()</a>, <a class="el" href="structj1850.html#a101b5eff6a234d684c4920466b77e1c2">j1850::filename</a>, <a class="el" href="structj1850.html#a131791e49bc75185eb72cd95f3cd4155">j1850::idle</a>, <a class="el" href="structj1850.html#a0b4378dbe71b3088188018e8faefb485">j1850::index</a>, <a class="el" href="structj1850.html#aa8e5c895fd4ca0dae2ead0e2c4e59cf8">j1850::init_string_index</a>, <a class="el" href="debug_8h.html#a3ce13c42b29fe2a7552478859b7f3c25aa4a22485b46e3407434f1093e42867d4">lvl_debug</a>, <a class="el" href="debug_8h.html#a3ce13c42b29fe2a7552478859b7f3c25a83f9ab2a71d2244b99268510714e94fb">lvl_error</a>, <a class="el" href="debug_8h.html#a3ce13c42b29fe2a7552478859b7f3c25a6e67a0649f81060a391cfe102acbd707">lvl_info</a>, <a class="el" href="structj1850.html#a478db7a832fc935ecfe11a6821a801ad">j1850::map</a>, <a class="el" href="structj1850.html#a7a68fddce23ba7338fca6e1f92df1602">j1850::message</a>, <a class="el" href="structj1850.html#a65e119aea661b00a269b7ada2a47d8c6">j1850::nav</a>, <a class="el" href="structj1850.html#a62cff13edfbe50b19a41989e2500b4a1">j1850::odo</a>, <a class="el" href="j1850_8c.html#a88dd7d1933a98397b5b9977a27908b55">rand_str()</a>, <a class="el" href="structj1850.html#a9f765ecfad3ff85ef08cbe80dec128fc">j1850::tank_level</a>, <a class="el" href="structj1850.html#ab09599d836795241f3a5bddd017d0590">j1850::trans_rpm</a>, <a class="el" href="datawindow_8c.html#ab10bc3dfea7bd427cb6cbf318eb80c1e">value</a>, and <a class="el" href="j1850_8c.html#a939cdd1c9f91432e7ae9a7744498c86c">write_to_serial_port()</a>.</p>

<p class="reference">Referenced by <a class="el" href="j1850_8c.html#aa7bc0ad9e76f0dda863f97e6c9464296">j1850_init_serial_port()</a>.</p>

</div>
</div>
<a id="aa7bc0ad9e76f0dda863f97e6c9464296"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7bc0ad9e76f0dda863f97e6c9464296">&#9670;&nbsp;</a></span>j1850_init_serial_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void j1850_init_serial_port </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structj1850.html">j1850</a> *&#160;</td>
          <td class="paramname"><em>j1850</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the serial port and saves state to the <a class="el" href="structj1850.html">j1850</a> object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname"><a class="el" href="structj1850.html">j1850</a></td><td>- the <a class="el" href="structj1850.html">j1850</a> struct containing the state of the plugin</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>Opens the serial port and saves state to the <a class="el" href="structj1850.html">j1850</a> object </p>

<p class="reference">References <a class="el" href="structj1850.html#a1c280b389a318ce0c544969d046ae487">j1850::callback</a>, <a class="el" href="callback_8h.html#aefbe6726c48359199c9051cb5e4ca942">callback_cast</a>, <a class="el" href="callback_8h.html#a1a1cf44a4c7208d4c8e747c197ffcc47">callback_new_1</a>, <a class="el" href="debug_8h.html#aba3c0ccefe6daa8941b173073268729e">dbg</a>, <a class="el" href="structj1850.html#a46cf3a1eee02a95f0d17108125e1baf8">j1850::device</a>, <a class="el" href="event_8c.html#a84ab02a7011d6f7f66f4d2502658fb1d">event_add_timeout()</a>, <a class="el" href="structj1850.html#a131791e49bc75185eb72cd95f3cd4155">j1850::idle</a>, <a class="el" href="j1850_8c.html#a8a7c317cd1d832c8acebc47612e95f92">j1850_idle()</a>, and <a class="el" href="debug_8h.html#a3ce13c42b29fe2a7552478859b7f3c25a83f9ab2a71d2244b99268510714e94fb">lvl_error</a>.</p>

<p class="reference">Referenced by <a class="el" href="j1850_8c.html#ad1ef6324654f6f1304d80352e3f45883">osd_j1850_init()</a>.</p>

</div>
</div>
<a id="a7573663581a3c8705b05d27749bdb8ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7573663581a3c8705b05d27749bdb8ad">&#9670;&nbsp;</a></span>osd_j1850_draw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_j1850_draw </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structj1850.html">j1850</a> *&#160;</td>
          <td class="paramname"><em>this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnavit.html">navit</a> *&#160;</td>
          <td class="paramname"><em>nav</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structvehicle.html">vehicle</a> *&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Draws the <a class="el" href="structj1850.html">j1850</a> OSD. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname"><a class="el" href="structj1850.html">j1850</a></td><td>- the <a class="el" href="structj1850.html">j1850</a> struct containing the state of the plugin nav - the navit object v - the vehicle object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>Draws the <a class="el" href="structj1850.html">j1850</a> OSD. Currently it only displays the last parsed message </p>

<p class="reference">References <a class="el" href="maptool_8h.html#a0495c1aa20654b5c917de9c2fc02cdf9">bbox()</a>, <a class="el" href="graphics_8h.html#ad01f84cc748ef81b278a4be6ff1ea89aa88298faad2fed2eb4fd66dc5a4848c57">draw_mode_end</a>, <a class="el" href="structgraphics.html#a5e0e801c2e84a56d3f0b7e1e5383d4cf">graphics::font</a>, <a class="el" href="structosd__item.html#ac5ef7d8953962a62a3bda46d04ac1548">osd_item::gr</a>, <a class="el" href="graphics_8c.html#a4346119c6921341dfc973a00579286a9">graphics_draw_mode()</a>, <a class="el" href="graphics_8c.html#ad150b9e24b7f75f8f2d684e6a1e5f809">graphics_draw_text()</a>, <a class="el" href="graphics_8c.html#abc516ca06af2f5c44540e2577a080f64">graphics_get_text_bbox()</a>, <a class="el" href="structosd__item.html#aff849de461cbd617b0e26e39df0cf6be">osd_item::h</a>, <a class="el" href="mg_8h.html#aaf29c41f2020649a36c2820ffa06119a">p</a>, and <a class="el" href="structosd__item.html#a57318924da99a40920bd552e4206aa06">osd_item::w</a>.</p>

<p class="reference">Referenced by <a class="el" href="j1850_8c.html#ad1ef6324654f6f1304d80352e3f45883">osd_j1850_init()</a>, and <a class="el" href="j1850_8c.html#ac512538cc3238daa506bcd0f97ac02c1">osd_j1850_new()</a>.</p>

</div>
</div>
<a id="ad1ef6324654f6f1304d80352e3f45883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1ef6324654f6f1304d80352e3f45883">&#9670;&nbsp;</a></span>osd_j1850_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void osd_j1850_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structj1850.html">j1850</a> *&#160;</td>
          <td class="paramname"><em>this</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structnavit.html">navit</a> *&#160;</td>
          <td class="paramname"><em>nav</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the <a class="el" href="structj1850.html">j1850</a> OSD. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname"><a class="el" href="structj1850.html">j1850</a></td><td>- the <a class="el" href="structj1850.html">j1850</a> struct containing the state of the plugin nav - the navit object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>Initialize the <a class="el" href="structj1850.html">j1850</a> OSD </p>

<p class="reference">References <a class="el" href="popup_8c.html#aafe71b070668214be9b4b4849985dc6b">c</a>, <a class="el" href="callback_8h.html#aefbe6726c48359199c9051cb5e4ca942">callback_cast</a>, <a class="el" href="callback_8h.html#a1a1cf44a4c7208d4c8e747c197ffcc47">callback_new_1</a>, <a class="el" href="event_8c.html#a84ab02a7011d6f7f66f4d2502658fb1d">event_add_timeout()</a>, <a class="el" href="structosd__item.html#ac5ef7d8953962a62a3bda46d04ac1548">osd_item::gr</a>, <a class="el" href="structosd__item.html#a41caf500389648ee9f8ba928870bd474">osd_item::graphic_fg</a>, <a class="el" href="graphics_8c.html#a922588c7f73a70872a92e29b5cf45b83">graphics_gc_new()</a>, <a class="el" href="graphics_8c.html#ac651bf3017237dc4233681517f77a178">graphics_gc_set_foreground()</a>, <a class="el" href="graphics_8c.html#a7763c3bb4b5a77666fa580ade99cedda">graphics_gc_set_linewidth()</a>, <a class="el" href="j1850_8c.html#aa7bc0ad9e76f0dda863f97e6c9464296">j1850_init_serial_port()</a>, <a class="el" href="j1850_8c.html#a7573663581a3c8705b05d27749bdb8ad">osd_j1850_draw()</a>, <a class="el" href="osd_8c.html#a81f8a476d02d720a1b174604901d0218">osd_set_std_graphic()</a>, and <a class="el" href="garmin__img_8c.html#a8a31e3e5c2765d45488c75c00bacfefd">width</a>.</p>

<p class="reference">Referenced by <a class="el" href="j1850_8c.html#ac512538cc3238daa506bcd0f97ac02c1">osd_j1850_new()</a>.</p>

</div>
</div>
<a id="ac512538cc3238daa506bcd0f97ac02c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac512538cc3238daa506bcd0f97ac02c1">&#9670;&nbsp;</a></span>osd_j1850_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct osd_priv* osd_j1850_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnavit.html">navit</a> *&#160;</td>
          <td class="paramname"><em>nav</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structosd__methods.html">osd_methods</a> *&#160;</td>
          <td class="paramname"><em>meth</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structattr.html">attr</a> **&#160;</td>
          <td class="paramname"><em>attrs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the <a class="el" href="structj1850.html">j1850</a> OSD and set some default properties. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">nav</td><td>- the navit object meth - the <a class="el" href="structosd__methods.html">osd_methods</a> attrs - pointer to the attributes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>Creates the <a class="el" href="structj1850.html">j1850</a> OSD and set some default properties </p>

<p class="reference">References <a class="el" href="attr_8c.html#ac6577d49e590de0f9012c729a315c7cc">attr_search()</a>, <a class="el" href="structattr.html#a464cf684a789545b3ad0242e4e704701">attr::attrs</a>, <a class="el" href="callback_8h.html#aefbe6726c48359199c9051cb5e4ca942">callback_cast</a>, <a class="el" href="callback_8h.html#ae7c649edc48dc3e82a7f513746dcb44e">callback_new_attr_1</a>, <a class="el" href="debug_8h.html#aba3c0ccefe6daa8941b173073268729e">dbg</a>, <a class="el" href="structosd__item__methods.html#a46c5f429302cc31e9e34bafc85dc1ccd">osd_item_methods::draw</a>, <a class="el" href="garmin__img_8c.html#a59aa20226ab9bcc66f5a649808ce874a">filename</a>, <a class="el" href="structosd__item.html#a7ac2aa85d2f3035e3dce99914244e372">osd_item::font_size</a>, <a class="el" href="structosd__item.html#aff849de461cbd617b0e26e39df0cf6be">osd_item::h</a>, <a class="el" href="structj1850.html#aa8e5c895fd4ca0dae2ead0e2c4e59cf8">j1850::init_string_index</a>, <a class="el" href="debug_8h.html#a3ce13c42b29fe2a7552478859b7f3c25a83f9ab2a71d2244b99268510714e94fb">lvl_error</a>, <a class="el" href="structosd__item.html#a05b0080d170686984b8e2f9babfdce57">osd_item::meth</a>, <a class="el" href="structj1850.html#a65e119aea661b00a269b7ada2a47d8c6">j1850::nav</a>, <a class="el" href="structosd__item.html#a372103371db7d2f63d23487329b5433d">osd_item::navit</a>, <a class="el" href="group__navit.html#gabad777fba3e5022f3bc4c0d7c693e684">navit_add_callback()</a>, <a class="el" href="structattr.html#aebf8c468883c8a41033b97c2ae91003b">attr::num</a>, <a class="el" href="osd_8h.html#a0630610c20c4d7bdcfb44f7802def280">osd_draw_cast</a>, <a class="el" href="j1850_8c.html#a7573663581a3c8705b05d27749bdb8ad">osd_j1850_draw()</a>, <a class="el" href="j1850_8c.html#ad1ef6324654f6f1304d80352e3f45883">osd_j1850_init()</a>, <a class="el" href="osd_8c.html#a45434510477f4d91bb5cc6fc12ab158a">osd_set_std_attr()</a>, <a class="el" href="structosd__item.html#a681dde1eac2736697a6a2718c72a1dae">osd_item::p</a>, <a class="el" href="structattr.html#a866ccbbc4e5249f2e53a0a3db2525542">attr::u</a>, <a class="el" href="structosd__item.html#a57318924da99a40920bd552e4206aa06">osd_item::w</a>, <a class="el" href="garmin__img_8c.html#a8a31e3e5c2765d45488c75c00bacfefd">width</a>, <a class="el" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">point::x</a>, and <a class="el" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="j1850_8c.html#a1eaae939034896b436dffbf5e93c0da1">plugin_init()</a>.</p>

</div>
</div>
<a id="a1eaae939034896b436dffbf5e93c0da1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eaae939034896b436dffbf5e93c0da1">&#9670;&nbsp;</a></span>plugin_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void plugin_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The plugin entry point. </p>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>The plugin entry point </p>

<p class="reference">References <a class="el" href="structattr__iter.html#a59f531e966274819d2ecda88c488f936">attr_iter::iter</a>, and <a class="el" href="j1850_8c.html#ac512538cc3238daa506bcd0f97ac02c1">osd_j1850_new()</a>.</p>

</div>
</div>
<a id="a88dd7d1933a98397b5b9977a27908b55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88dd7d1933a98397b5b9977a27908b55">&#9670;&nbsp;</a></span>rand_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rand_str </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a fake sentence. Used for debugging. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>- the char * to which we will write the sentence lenght - the length of the sentence to generate</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>Generates a fake string to simulate data from the serial port </p>

<p class="reference">References <a class="el" href="namespacestartup.html#a2fd577439fdb6590469c7be5ff2dca86">startup::dest</a>, and <a class="el" href="garmin__img_8c.html#a9f59b34b1f25fe00023291b678246bcc">length</a>.</p>

<p class="reference">Referenced by <a class="el" href="j1850_8c.html#a8a7c317cd1d832c8acebc47612e95f92">j1850_idle()</a>.</p>

</div>
</div>
<a id="a1d6a7d7e0d07e2ba603bd3abd98b264f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d6a7d7e0d07e2ba603bd3abd98b264f">&#9670;&nbsp;</a></span>send_and_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_and_read </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>USB</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends 'cmd' and reads the reply from the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>- the char * that we will write to the serial port device - the serial port device</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>Sends 'cmd' and reads the reply from the device </p>

<p class="reference">References <a class="el" href="debug_8h.html#aba3c0ccefe6daa8941b173073268729e">dbg</a>, <a class="el" href="debug_8h.html#a3ce13c42b29fe2a7552478859b7f3c25aa4a22485b46e3407434f1093e42867d4">lvl_debug</a>, and <a class="el" href="debug_8h.html#a3ce13c42b29fe2a7552478859b7f3c25a83f9ab2a71d2244b99268510714e94fb">lvl_error</a>.</p>

</div>
</div>
<a id="a939cdd1c9f91432e7ae9a7744498c86c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a939cdd1c9f91432e7ae9a7744498c86c">&#9670;&nbsp;</a></span>write_to_serial_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write_to_serial_port </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>device</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes 'cmd' to the serial port'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cmd</td><td>- the char * that we will write to the serial port device - the serial port device</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>Write the cmd to the serial port </p>

<p class="reference">References <a class="el" href="debug_8h.html#aba3c0ccefe6daa8941b173073268729e">dbg</a>, and <a class="el" href="debug_8h.html#a3ce13c42b29fe2a7552478859b7f3c25a6e67a0649f81060a391cfe102acbd707">lvl_info</a>.</p>

<p class="reference">Referenced by <a class="el" href="j1850_8c.html#a8a7c317cd1d832c8acebc47612e95f92">j1850_idle()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b4c3aec6cd8f28418150dce663061cfa.html">plugin</a></li><li class="navelem"><a class="el" href="dir_2e6071dd015bf407accca31deaee8497.html">j1850</a></li><li class="navelem"><a class="el" href="j1850_8c.html">j1850.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
